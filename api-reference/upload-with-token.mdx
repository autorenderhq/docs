---
title: 'Upload File with Token'
openapi: 'POST /api/v1/uploads/{token}'
---

## Overview

Upload a file directly using the token generated by the Generate Browser Upload Token endpoint. The token is supplied as a URL path parameter. This endpoint accepts raw binary file data (not multipart form data) and creates the upload record during the upload operation. No API key is required - authentication is handled by the token.

## Authentication

This endpoint uses token-based authentication. The token is provided in the URL path. No API key is required.

## Request

### URL Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `token` | string | ✅ Yes | The upload token from Generate Upload Token endpoint (in URL path) |

### Request Headers

| Header | Type | Required | Description |
|--------|------|----------|-------------|
| `Content-Type` | string | ✅ Yes | MIME type of the file (e.g., `image/jpeg`, `image/png`, `application/octet-stream`) |
| `Content-Length` | number | ❌ No | File size in bytes (optional, but recommended) |
| `X-File-Name` | string | ✅ Yes | File name for the uploaded file (e.g., `my-image.jpg`) |

### Request Body

The request body should be the raw binary file data.

## Request Examples

### Upload JPEG Image

```bash
curl -X POST \
  https://dev-api.autorender.io/api/v1/uploads/YOUR_TOKEN_HERE \
  -H "Content-Type: image/jpeg" \
  -H "X-File-Name: my-image.jpg" \
  --data-binary @/path/to/your/image.jpg
```

### Upload PNG Image

```bash
curl -X POST \
  https://dev-api.autorender.io/api/v1/uploads/YOUR_TOKEN_HERE \
  -H "Content-Type: image/png" \
  -H "X-File-Name: my-image.png" \
  --data-binary @/path/to/your/image.png
```

### Upload with Content-Length Header

```bash
curl -X POST \
  https://dev-api.autorender.io/api/v1/uploads/YOUR_TOKEN_HERE \
  -H "Content-Type: image/jpeg" \
  -H "X-File-Name: my-image.jpg" \
  -H "Content-Length: $(stat -f%z /path/to/your/image.jpg)" \
  --data-binary @/path/to/your/image.jpg
```

### Upload WebP Image

```bash
curl -X POST \
  https://dev-api.autorender.io/api/v1/uploads/YOUR_TOKEN_HERE \
  -H "Content-Type: image/webp" \
  -H "X-File-Name: my-image.webp" \
  --data-binary @/path/to/your/image.webp
```

### Upload Generic Binary File

```bash
curl -X POST \
  https://dev-api.autorender.io/api/v1/uploads/YOUR_TOKEN_HERE \
  -H "Content-Type: application/octet-stream" \
  -H "X-File-Name: my-file.bin" \
  --data-binary @/path/to/your/file.bin
```

**Note:** Replace `YOUR_TOKEN_HERE` with the actual token value from the generate-token response.

## Response

### Success Response (201 Created)

```json
{
  "success": true,
  "data": {
    "id": "file-id",
    "file_no": "FILE123",
    "name": "avatar.jpg",
    "url": "https://...",
    "path": "user-uploads/avatars",
    "width": 400,
    "height": 400,
    "format": "jpg",
    "file_size": 102400,
    "workspace_no": "WS123"
  }
}
```

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `success` | boolean | Indicates if the upload was successful |
| `data` | object | File upload data |
| `data.id` | string | Unique file record ID |
| `data.file_no` | string | 10-character file number identifier |
| `data.name` | string | Filename |
| `data.url` | string | Full CDN URL to access the uploaded file |
| `data.path` | string | Folder path where the file is stored |
| `data.width` | integer\|null | Image width in pixels (null for non-image files) |
| `data.height` | integer\|null | Image height in pixels (null for non-image files) |
| `data.format` | string | File format/extension (e.g., jpg, png, webp) |
| `data.file_size` | integer | File size in bytes |
| `data.workspace_no` | string | Workspace identifier |

## Error Responses

### 400 Bad Request

```json
{
  "success": false,
  "error": "Validation error message"
}
```

### 401 Unauthorized

```json
{
  "success": false,
  "error": "Unauthorized",
  "message": "Invalid or expired token"
}
```

### 500 Internal Server Error

```json
{
  "success": false,
  "error": "Upload failed",
  "message": "Detailed error message"
}
```

---

## Why

**Complete the token-based upload workflow.** The Upload File with Token endpoint allows client-side applications to upload files using the secure token generated by your backend. This completes the secure upload workflow where tokens are generated server-side and used by clients to upload files without exposing API keys.

## Features

- **Token-based upload**: Upload files using the secure token without exposing API keys
- **Raw binary data**: Accepts raw file binary data (not multipart form data)
- **Automatic filename detection**: Extracts filename from Content-Disposition header or derives from Content-Type
- **Policy enforcement**: Automatically enforces constraints (folder, tags, transformations, file size) encoded in the token
- **Format flexibility**: Accepts any file format (image/* and application/octet-stream)
- **Upload record creation**: Creates the upload record during the upload operation

## Use Cases

- **Client-side uploads**: Upload files directly from web browsers or mobile apps using the generated token
- **Secure frontend uploads**: Enable uploads from frontend applications without exposing API keys
- **Token-based workflows**: Implement upload workflows where tokens are generated on the backend and used by clients
- **Mobile app uploads**: Enable direct uploads from mobile applications using secure tokens
